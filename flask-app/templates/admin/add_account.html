{% extends "base.html" %}

{% block page_title %}Add Account{% endblock %}
{% block page_description %}Add a new shipping provider account{% endblock %}

{% block header_actions %}
<a href="{{ url_for('admin_accounts') }}" class="btn bg-gray-500 text-white hover:bg-gray-600">
    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
    </svg>
    Back to Accounts
</a>
{% endblock %}

{% block content %}
<div class="max-w-2xl">
    <div class="card">
        <div class="p-6 border-b border-gray-200">
            <h2 class="text-lg font-semibold text-gray-900">Add New Account</h2>
            <p class="text-sm text-gray-600">Configure a new shipping provider account for order tracking</p>
        </div>
        
        <form method="POST" class="p-6 space-y-6">
            <!-- Provider Selection -->
            <div>
                <label for="provider" class="block text-sm font-medium text-gray-700 mb-2">Provider *</label>
                <select name="provider" id="provider" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-bluez-500 focus:border-transparent">
                    <option value="">Select a provider...</option>
                    <option value="fcpeuro">FCP-Euro</option>
                    <option value="orielly">O'Reilly Auto Parts</option>
                    <option value="autozone">AutoZone</option>
                    <option value="harborfreight">Harbor Freight</option>
                    <option value="amazon">Amazon</option>
                </select>
                <p class="mt-1 text-xs text-gray-500">Choose the shipping provider you want to integrate</p>
            </div>

            <!-- Account Name -->
            <div>
                <label for="account_name" class="block text-sm font-medium text-gray-700 mb-2">Account Name *</label>
                <input type="text" name="account_name" id="account_name" required 
                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-bluez-500 focus:border-transparent"
                       placeholder="e.g., Main FCP Euro Account">
                <p class="mt-1 text-xs text-gray-500">A descriptive name for this account</p>
            </div>

            <!-- Username -->
            <div>
                <label for="username" class="block text-sm font-medium text-gray-700 mb-2">Username</label>
                <input type="text" name="username" id="username" 
                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-bluez-500 focus:border-transparent"
                       placeholder="Your account username">
                <p class="mt-1 text-xs text-gray-500">Your login username for the provider (if applicable)</p>
            </div>

            <!-- API Key -->
            <div>
                <label for="api_key" class="block text-sm font-medium text-gray-700 mb-2">API Key</label>
                <input type="password" name="api_key" id="api_key" 
                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-bluez-500 focus:border-transparent"
                       placeholder="Enter API key if available">
                <p class="mt-1 text-xs text-gray-500">API key for programmatic access (will be encrypted)</p>
            </div>

            <!-- API Secret -->
            <div>
                <label for="api_secret" class="block text-sm font-medium text-gray-700 mb-2">API Secret</label>
                <input type="password" name="api_secret" id="api_secret" 
                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-bluez-500 focus:border-transparent"
                       placeholder="Enter API secret if available">
                <p class="mt-1 text-xs text-gray-500">API secret for authentication (will be encrypted)</p>
            </div>

            <!-- Provider-specific instructions -->
            <div id="provider-instructions" class="hidden">
                <div class="bg-blue-50 border border-blue-200 rounded-md p-4">
                    <h4 class="text-sm font-medium text-blue-900 mb-2">Setup Instructions</h4>
                    <div id="instructions-content" class="text-sm text-blue-800"></div>
                </div>
            </div>

            <!-- Submit Buttons -->
            <div class="flex justify-end space-x-3 pt-4">
                <a href="{{ url_for('admin_accounts') }}" class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50">
                    Cancel
                </a>
                <button type="submit" class="btn btn-primary">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                    </svg>
                    Add Account
                </button>
            </div>
        </form>
    </div>
</div>

<script>
document.getElementById('provider').addEventListener('change', function() {
    const provider = this.value;
    const instructionsDiv = document.getElementById('provider-instructions');
    const instructionsContent = document.getElementById('instructions-content');
    
    const instructions = {
        'fcpeuro': 'To integrate with FCP-Euro, you\'ll need to contact their support team to request API access. They may provide you with API credentials for order tracking.',
        'orielly': 'O\'Reilly Auto Parts may require business account setup for API access. Contact their B2B support for integration details.',
        'autozone': 'AutoZone offers API access through their Commercial program. You may need to register for their business portal.',
        'harborfreight': 'Harbor Freight API access may be limited. Check their developer documentation or contact support.',
        'amazon': 'For Amazon integration, you\'ll need to register for Amazon MWS (Marketplace Web Service) or SP-API. This requires a Professional selling account.'
    };
    
    if (provider && instructions[provider]) {
        instructionsContent.textContent = instructions[provider];
        instructionsDiv.classList.remove('hidden');
    } else {
        instructionsDiv.classList.add('hidden');
    }
});
</script>
{% endblock %}
